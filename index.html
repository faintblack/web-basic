<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <link rel="stylesheet" href="./css/site.css" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
      integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <header>
      <div id="header">
        <div id="app-title">
          <h1>Dicoding Final Submission</h1>
        </div>
        <nav>
          <ul>
            <li><a id="home" href="#">Home</a></li>
            <li><a id="about" href="#">About</a></li>
            <li><a id="contact" href="#">Contact Us</a></li>
          </ul>
        </nav>
      </div>
    </header>
    <main>
      <aside>
        <div id="profile_bar">
          <div id="profile_pict">
            <img src="img/user.png" id="foto_profil" alt="Your pic" />
          </div>
          <div id="profile_stat" class="flex-box">
            <h3 class="text-color">You</h3>
          </div>
          <div id="profile_icon" class="flex-box text-color2">
            <i class="fas fa-circle-notch"></i>
            <i class="fas fa-comment-alt"></i>
            <i class="fas fa-ellipsis-v"></i>
          </div>
        </div>
        <div id="chat_bar">
          <div class="chat_list">
            <div class="chat_pict">
              <img
                src="img/dika.jpg"
                class="foto_profil_mini"
                alt="Mahardika Kharisma Ajie"
              />
            </div>
            <div class="chat_content">
              <div class="chat_name">
                <h4 class="text-color">Mahardika Kharisma Adjie</h4>
              </div>
              <div class="chat_message">
                <h5 class="text-color2">Okesiap bosss wkwkwk</h5>
              </div>
            </div>
            <div class="chat_time">
              <p>now</p>
            </div>
          </div>
        </div>
      </aside>
      <div id="content" class="flex-box">
        <div id="content_header">
          <div id="content_profile_pict">
            <img
              src="img/dika.jpg"
              class="foto_profil_mini"
              alt="Mahardika Kharisma Ajie"
            />
          </div>
          <div id="content_profile_name">
            <h3 class="text-color">Mahardika Kharisma Adjie</h3>
          </div>
          <div id="content_header_symbol" class="flex-box text-color2">
            <i class="fas fa-search"></i>
            <i class="fas fa-ellipsis-v"></i>
          </div>
        </div>
        <div id="content_body" class="flex-box"></div>
        <div id="content_footer" class="flex-box">
          <div id="footer_message" class="flex-box">
            <form action="" id="sendForm" autocomplete="off">
              <input
                type="text"
                id="message_bar"
                class="no-outline"
                placeholder="Type a message"
              />
            </form>
          </div>
          <div id="send_button" class="flex-box">
            <span style="color: antiquewhite; margin: 0px auto">
              <button id="send_icon" type="submit">
                <i class="fas fa-angle-right"></i>
              </button>
            </span>
          </div>
        </div>
      </div>
    </main>
    <footer>
      <div id="footer-title" class="flex-box">
        <h2 style="color: antiquewhite;">Contact</h2>
      </div>
      <div id="footer_contents" class="flex-box">
        <div class="fc flexbox">
          <div class="fc_list flex-box">
            <span style="color: antiquewhite">
              <a href="http://github.com/faintblack">
                <i class="fab fa-github fa-3x"></i>
              </a>
            </span>
            <h4><a href="http://github.com/faintblack">Github</a></h4>
          </div>
        </div>
        <div class="fc flexbox">
          <div class="fc_list flex-box">
            <span style="color: antiquewhite">
              <a href="http://instagram.com/mhrdkk">
                <i class="fab fa-instagram fa-3x"></i>
              </a>
            </span>
            <h4><a href="http://instagram.com/mhrdkk">Instagram</a></h4>
          </div>
        </div>
        <div class="fc flexbox">
          <div class="fc_list flex-box">
            <span style="color: antiquewhite">
              <a href="http://facebook.com/mhrdkk">
                <i class="fab fa-facebook fa-3x"></i>
              </a>
            </span>
            <h4><a href="http://facebook.com/mhrdkk">Facebook</a></h4>
          </div>
        </div>
        <div class="fc flexbox">
          <div class="fc_list flex-box">
            <span style="color: antiquewhite">
              <a href="http://twitter.com/mhrdkk">
                <i class="fab fa-twitter fa-3x"></i>
              </a>
            </span>
            <h4><a href="http://twitter.com/mhrdkk">Twitter</a></h4>
          </div>
        </div>
      </div>
      <div id="credit" class="flex-box">
        <h4 style="color: antiquewhite;">
          Copyright Â© 2020 - Mahardika Kharisma Adjie. All rights reserved.
        </h4>
      </div>
    </footer>
    <script
      src="https://code.jquery.com/jquery-3.5.1.js"
      integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
      crossorigin="anonymous"
    ></script>
    <!-- <script type="text/javscript" src="./js/jquery-3.5.1.js" ></script> -->
    <script type="text/javascript">
      let data_chat = [
        {
          id: "him",
          message: "Assalamu'alaikum",
          time: "17:00",
        },
        {
          id: "me",
          message: "Wa'alaikumussalam",
          time: "17:01",
        },
        {
          id: "him",
          message: `Perkenalkan, nama saya Mahardika Kharisma Adjie, berikut adalah biodata lengkap diri saya... <br> <br>
					Nama Lengkap : Mahardika Kharisma Adjie <br>
					Nama Panggilan : Dika <br>
					Tempat/Tanggal Lahir : Bandung, 16 Agustus 1997 <br>
					Pendidikan Terakhir : S1 Teknik Informatika Universitas Islam Negeri Sultan Syarif Kasim Riau <br>
					Domisili : Jalan Garuda Sakti, Pekanbaru, Riau. <br> <br>`,
          time: "17:04",
        },
        {
          id: "him",
          message: `<img src="img/pas-foto.jpg" width="100%" height="100%" style="object-fit: cover; border-radius: 15px; max-width:250px; max-height:250px" alt="" >`,
          time: "17:04",
        },
        {
          id: "him",
          message:
            "Saya mengambil kelas Belajar Dasar Pemrograman Web di Dicoding melalui jalur Prakerja, sebelumnya saya sudah pernah juga menyelesaikan modul pembelajaran dari Dicoding yaitu kelas Menjadi Android Developer Expert, yang saat ini sudah berubah nama menjadi Belajar Fundamental Aplikasi Android.",
          time: "17:05",
        },
        {
          id: "me",
          message:
            "Terima kasih atas partisipasinya dalam program pembelajaran yang diadakan oleh dicoding",
          time: "17:06",
        },
        {
          id: "me",
          message:
            "Mohon ditunggu hasil review tugasnya dari kami, semoga mendapatkan hasil yang memuaskan...",
          time: "17:06",
        },
        {
          id: "me",
          message: "Banyak2 berdoa ya hhaha",
          time: "17:07",
        },
        {
          id: "him",
          message: "Okesiap bosss wkwkwk",
          time: "17:07",
        },
      ];

      let isi_chat = ``;

      data_chat.map((data, i) => {
        isi_chat += `
					<article class="flex-box bubble_message shadow text-color2 ${
            data.id == "him" ? "flex-left" : "flex-right"
          } ${i == data_chat.length - 1 ? "highlighted" : ""}">
						<span>${data.message} </span>
						<div class="message_stat flex-box">
							<span>${data.time}</span>
							${data.id != "him" ? '<span><img src="img/doubletick.png" alt="" ></span>' : ""}
						</div>
					</article>
					`;
      });

      $("#content_body").append(isi_chat);

      $(document).ready(function () {
        $("#content_body").animate(
          { scrollTop: $("#content_body").prop("scrollHeight") },
          1300
        );
      });

      function sendMessage() {
        let input = $("#message_bar").val();

        var time = new Date().toLocaleTimeString("ja-JP");
        time = time.substr(0, 5);
        console.log(time);

        // Remove old highlight
        $("article").removeClass("highlighted");

        let new_message = `
          <article class="flex-box bubble_message text-color2 shadow flex-right highlighted">
            <span>${input}</span>
            <div class="message_stat flex-box">
              <span>${time}</span>
            </div>
            <span><img src="img/doubletick.png" alt="" style="width: 13px; height: 13px; vertical-align:bottom;"></span>
          </article>
				`;

        // Push new message to content_body
        $("#content_body").append(new_message);

        // automaticly scrolling
        $("#content_body").animate(
          {
            scrollTop:
              $("#content_body").prop("scrollHeight") -
              $("#content_body").prop("clientHeight"),
          },
          500
        );

        document.getElementById("message_bar").value = "";
      }

      $("#sendForm").submit(function (e) {
        e.preventDefault();
        sendMessage();
      });

      // on click
      $(".chat_list").on("click", function () {
        $("#content_body").animate(
          {
            scrollTop:
              $("#content_body").prop("scrollHeight") -
              $("#content_body").prop("clientHeight"),
          },
          500
        );
      });

      $("#home").on("click", function () {
        $("html").animate(
          {
            scrollTop: 0,
          },
          500
        );
      });

      $("#about").on("click", function () {
        $("html, body, #content_body").animate(
          {
            scrollTop: $("#content_body").offset(),
          },
          500
        );
      });

      $("#contact").on("click", function () {
        $("html").animate(
          {
            scrollTop: $(document).height(),
          },
          1000
        );
      });

      $("#send_icon").on("click", function () {
        sendMessage();
      });
    </script>
  </body>
</html>
