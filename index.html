<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" href="./css/site.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
</head>
<body>
<header>
	<div id="app-title">
		<h1>Sense Developer</h1>
		<h2>Pekanbaru</h2>
	</div>
	
	<nav>
		<ul>
			<li><a href="#home">Home</a></li>
			<li><a href="#about">About</a></li>
			<li><a href="#contact">Contact Us</a></li>
		</ul>
	</nav>
</header>
<main>
	<aside>
		<div id="profile_bar">
			<div id="profile_pict">
				<img src="img/user.png" id="foto_profil" alt="Mahardika Kharisma Ajie">
			</div>
			<div id="profile_stat" class="flex-box">
				<h3 class="text-color">You</h3>
			</div>
			<div id="profile_icon" class="flex-box text-color2">
				<i class="fas fa-circle-notch"></i>
				<i class="fas fa-comment-alt"></i>
				<i class="fas fa-ellipsis-v"></i>
			</div>
		</div>
		<div id="chat_bar" >
			<div class="chat_list">
				<div class="chat_pict" >
					<img src="img/dika.jpg" id="foto_profil2" alt="Mahardika Kharisma Ajie">
				</div>
				<div class="chat_content" >
					<div class="chat_name">
						<h4 class="text-color">Mahardika Kharisma Adjie</h4>
					</div>
					<div class="chat_message">
						<h5 class="text-color2">Okesiap bosss wkwkwk </h5>
					</div>
				</div>
				<div class="chat_time">
					<p>now</p>
				</div>
			</div>
		</div>
	</aside>
	<div id="content" class="flex-box">
		<div id="content_header">
			<div id="content_profile_pict">
				<img src="img/dika.jpg" id="foto_profil3" alt="Mahardika Kharisma Ajie">
			</div>
			<div id="content_profile_name">
				<h3 class="text-color">Mahardika Kharisma Adjie</h3>
			</div>
			<div id="content_header_symbol" class="flex-box text-color2">
				<i class="fas fa-search"></i>
				<i class="fas fa-ellipsis-v"></i>
			</div>
		</div>
		<div id="content_body" class="flex-box">
			<!-- <article class="flex-box bubble_message text-color2 flex-left">
				<span>Assalamu'alaikum </span>
				<div class="message_stat flex-box">
					<span>17:00</span>
				</div>
			</article>

			<article class="flex-box bubble_message text-color2 flex-right">
				<span>Wa'alaikumussalam</span>
				<div class="message_stat flex-box">
					<span>17:01</span>
					<span><img src="img/doubletick.png" alt=""></span>
				</div>
			</article>

			<article class="flex-box bubble_message text-color2 flex-left">
				<span>
					Perkenalkan, nama saya Mahardika Kharisma Adjie, berikut adalah biodata lengkap diri saya... <br> <br>
					Nama Lengkap : Mahardika Kharisma Adjie <br>
					Nama Panggilan : Dika <br>
					Tempat/Tanggal Lahir : Bandung, 16 Agustus 1997 <br>
					Pendidikan Terakhir : S1 Teknik Informatika Universitas Islam Negeri Sultan Syarif Kasim Riau <br>
					Domisili : Jalan Garuda Sakti, Pekanbaru, Riau. <br> <br>
				</span>
				<div class="message_stat flex-box">
					<span>17:04</span>
				</div>
			</article>
			<article class="flex-box bubble_message text-color2 flex-left">
				<span>
					<img src="/img/pas foto.jpg" width="250px" height="250px" style="object-fit: cover; border-radius: 15px;" alt="">
				</span>
				<div class="message_stat flex-box">
					<span>17:04</span>
				</div>
			</article>
			<article class="flex-box bubble_message text-color2 flex-left">
				<span>
					Saya mengambil kelas Belajar Dasar Pemrograman Web di Dicoding melalui jalur Prakerja, sebelumnya saya sudah pernah juga menyelesaikan modul pembelajaran dari Dicoding yaitu kelas Menjadi Android Developer Expert, yang saat ini sudah berubah nama menjadi Belajar Fundamental Aplikasi Android.
				</span>
				<div class="message_stat flex-box">
					<span>17:05</span>
				</div>
			</article>

			<article class="flex-box bubble_message text-color2 flex-right">
				<span>
					Terima kasih atas partisipasinya dalam program pembelajaran yang diadakan oleh dicoding
				</span>
				<div class="message_stat flex-box">
					<span>17:06</span>
					<span><img src="img/doubletick.png" alt=""></span>
				</div>
			</article>
			<article class="flex-box bubble_message text-color2 flex-right">
				<span>
					Mohon ditunggu hasil review tugasnya dari kami, semoga mendapatkan hasil yang memuaskan...
				</span>
				<div class="message_stat flex-box">
					<span>17:06</span>
					<span><img src="img/doubletick.png" alt=""></span>
				</div>
			</article>
			<article class="flex-box bubble_message text-color2 flex-right">
				<span>
					Banyak2 berdoa ya hhaha
				</span>
				<div class="message_stat flex-box">
					<span>17:07</span>
					<span><img src="img/doubletick.png" alt=""></span>
				</div>
			</article>

			<article id="last-message" class="flex-box bubble_message text-color2 flex-left highlighted">
				<span>
					Okesiap bosss wkwkwk
				</span>
				<div class="message_stat flex-box">
					<span>17:07</span>
				</div>
			</article> -->
		</div>
		<div id="content_footer" class="flex-box" >
			<div id="footer_message" class="flex-box">
				<form action="" id="sendForm" autocomplete="off">
					<input type="text" id="message_bar" class="no-outline" placeholder="Type a message">
				</form>
			</div>
			<div id="send_button">

			</div>
		</div>
	</div>
</main>
<footer>

</footer>
<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
<script type="text/javascript">

	let data_chat = [
		{
			id : "him",
			message : "Assalamu'alaikum",
			time : "17:00"
		},
		{
			id : "me",
			message : "Wa'alaikumussalam",
			time : "17:01"
		},
		{
			id : "him",
			message : `Perkenalkan, nama saya Mahardika Kharisma Adjie, berikut adalah biodata lengkap diri saya... <br> <br>
					Nama Lengkap : Mahardika Kharisma Adjie <br>
					Nama Panggilan : Dika <br>
					Tempat/Tanggal Lahir : Bandung, 16 Agustus 1997 <br>
					Pendidikan Terakhir : S1 Teknik Informatika Universitas Islam Negeri Sultan Syarif Kasim Riau <br>
					Domisili : Jalan Garuda Sakti, Pekanbaru, Riau. <br> <br>`,
			time : "17:04"
		},
		{
			id : "him",
			message : `<img src="/img/pas-foto.jpg" width="250px" height="250px" style="object-fit: cover; border-radius: 15px;" alt="">`,
			time : "17:04"
		},
		{
			id : "him",
			message : "Saya mengambil kelas Belajar Dasar Pemrograman Web di Dicoding melalui jalur Prakerja, sebelumnya saya sudah pernah juga menyelesaikan modul pembelajaran dari Dicoding yaitu kelas Menjadi Android Developer Expert, yang saat ini sudah berubah nama menjadi Belajar Fundamental Aplikasi Android.",
			time : "17:05"
		},
		{
			id : "me",
			message : "Terima kasih atas partisipasinya dalam program pembelajaran yang diadakan oleh dicoding",
			time : "17:06"
		},
		{
			id : "me",
			message : "Mohon ditunggu hasil review tugasnya dari kami, semoga mendapatkan hasil yang memuaskan...",
			time : "17:06"
		},
		{
			id : "me",
			message : "Banyak2 berdoa ya hhaha",
			time : "17:07"
		},
		{
			id : "him",
			message : "Okesiap bosss wkwkwk",
			time : "17:07"
		},
	];

	let isi_chat = ``;

	data_chat.map((data,i) => {
		isi_chat += `
		<article class="flex-box bubble_message text-color2 ${(data.id == 'him') ? 'flex-left' : 'flex-right'} ${(i == data_chat.length-1) ? 'highlighted' : ''}">
			<span>${data.message} </span>
			<div class="message_stat flex-box">
				<span>${data.time}</span>
				${(data.id != 'him') 
				? '<span><img src="img/doubletick.png" alt="" ></span>'
				: ''
				}
			</div>
		</article>
		`;
	});

	$('#content_body').append(isi_chat);

	$(document).ready(function (){
		
		$("#content_body").animate({ scrollTop: $('#content_body').prop("scrollHeight") - $('#content_body').prop("clientHeight")}, 1500);
		// document.getElementsByClassName("bubble_message highlighted")[0].scrollIntoView();

	});

	$("#sendForm").submit(function (e){
		e.preventDefault();
		let input = $("#message_bar").val();
		// console.log(input)

		var time = new Date().toLocaleTimeString('ja-JP');
		time = time.substr(0, 5);
		console.log(time)

		// Remove old highlight
		$('article').removeClass('highlighted');

		let new_message = `
		<article class="flex-box bubble_message text-color2 flex-right highlighted">
			<span>${input}</span>
			<div class="message_stat flex-box">
				<span>${time}</span>
			</div>
			<span><img src="img/doubletick.png" alt="" style="width: 13px; height: 13px; vertical-align:bottom;"></span>
		</article>
		`;

		// Push new message to content_body
		$('#content_body').append(new_message);

		// automaticly scrolling
		$("#content_body").animate({ scrollTop: $('#content_body').prop("scrollHeight") - $('#content_body').prop("clientHeight")}, 500);

		// Reset input box
		document.getElementById('message_bar').value = '';


	})
</script>
</body>
</html>